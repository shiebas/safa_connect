{% extends 'base.html' %}
{% load static %}

{% block title %}SAFA Registration - Step by Step{% endblock %}

{% block extra_css %}
<style>
.progress-step {
    position: relative;
    text-align: center;
    margin-bottom: 20px;
}
.progress-step.active { color: #28a745; }
.progress-step.completed { color: #28a745; }
.step-number {
    display: inline-block;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #6c757d;
    color: white;
    line-height: 40px;
    margin-bottom: 10px;
}
.step-number.active { background: #007bff; }
.step-number.completed { background: #28a745; }
</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <!-- Progress Steps -->
            <div class="row mb-5">
                <div class="col-md-2 progress-step {% if step == 1 %}active{% elif step > 1 %}completed{% endif %}">
                    <div class="step-number {% if step == 1 %}active{% elif step > 1 %}completed{% endif %}">1</div>
                    <div>Role Selection</div>
                </div>
                <div class="col-md-2 progress-step {% if step == 2 %}active{% elif step > 2 %}completed{% endif %}">
                    <div class="step-number {% if step == 2 %}active{% elif step > 2 %}completed{% endif %}">2</div>
                    <div>Personal Info</div>
                </div>
                <div class="col-md-2 progress-step {% if step == 3 %}active{% elif step > 3 %}completed{% endif %}">
                    <div class="step-number {% if step == 3 %}active{% elif step > 3 %}completed{% endif %}">3</div>
                    <div>Documentation</div>
                </div>
                <div class="col-md-2 progress-step {% if step == 4 %}active{% elif step > 4 %}completed{% endif %}">
                    <div class="step-number {% if step == 4 %}active{% elif step > 4 %}completed{% endif %}">4</div>
                    <div>POPI Consent</div>
                </div>
                <div class="col-md-2 progress-step {% if step == 5 %}active{% elif step > 5 %}completed{% endif %}">
                    <div class="step-number {% if step == 5 %}active{% elif step > 5 %}completed{% endif %}">5</div>
                    <div>Payment</div>
                </div>
                <div class="col-md-2 progress-step {% if step == 6 %}active{% endif %}">
                    <div class="step-number {% if step == 6 %}active{% endif %}">6</div>
                    <div>Complete</div>
                </div>
            </div>
            
            <!-- Step Content -->
            {% if step == 5 %}
            <!-- Payment Step -->
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4><i class="fas fa-credit-card me-2"></i>Payment Information</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle me-2"></i>SAFA Bank Details</h5>
                        <table class="table table-sm table-borderless mb-0">
                            <tr><td><strong>Bank:</strong></td><td>{{ payment_info.BANK_NAME }}</td></tr>
                            <tr><td><strong>Account Number:</strong></td><td>{{ payment_info.ACCOUNT_NUMBER }}</td></tr>
                            <tr><td><strong>Branch Code:</strong></td><td>{{ payment_info.BRANCH_CODE }}</td></tr>
                            <tr><td><strong>Account Type:</strong></td><td>{{ payment_info.ACCOUNT_TYPE }}</td></tr>
                            <tr><td><strong>Account Holder:</strong></td><td>{{ payment_info.ACCOUNT_HOLDER }}</td></tr>
                            <tr><td><strong>Reference:</strong></td><td><code>{{ payment_reference }}</code></td></tr>
                            <tr><td><strong>Amount:</strong></td><td><strong>R{{ fee_amount }}</strong></td></tr>
                        </table>
                    </div>
                    <p class="text-muted">
                        Please use the reference number <strong>{{ payment_reference }}</strong> when making your payment.
                        Your registration will be activated once payment is confirmed.
                    </p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
