{% extends "admin/index.html" %}
{% load i18n %}

{% block content %}
{{ block.super }}

<div id="safa-tools-module" class="module">
    <table>
        <caption>
            <h2>SAFA Tools</h2>
        </caption>
        <tbody>
            <tr>
                <th scope="row">
                    <a href="/admin/tools/generate-all-safa-ids/">Generate Missing SAFA IDs</a>
                </th>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <th scope="row">
                    <a href="/admin/tools/safa-id-coverage/">SAFA ID Coverage Report</a>
                </th>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <th scope="row">
                    <a href="{% url 'admin:accounts_customuser_changelist' %}?safa_id__isnull=True">Users Without SAFA IDs</a>
                </th>
                <td></td>
                <td></td>
            </tr>
            {% if user.is_superuser %}
            <tr>
                <th scope="row">
                    <a href="/admin/tools/generate-qr-codes/">Generate QR Codes</a>
                </th>
                <td></td>
                <td></td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<script>
// Remove any duplicate SAFA Tools sections that might be added by other extensions
document.addEventListener('DOMContentLoaded', function() {
    var modules = document.querySelectorAll('#safa-tools-module');
    if (modules.length > 1) {
        for (var i = 1; i < modules.length; i++) {
            modules[i].remove();
        }
    }
});
</script>
{% endblock %}
